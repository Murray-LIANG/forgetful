jQuery(function(a){'use strict';var b=window._Blog||{};b.toggleMobileMenu=function(){a('#menu-toggle').on('click',()=>{a('#menu-toggle').toggleClass('active'),a('#mobile-menu').toggleClass('active')})},b.toggleTheme=function(){a('.theme-switch').on('click',()=>{a('body').toggleClass('dark-theme'),window.isDark=!window.isDark,window.localStorage&&window.localStorage.setItem('theme',window.isDark?'dark':'light'),this.echarts()})},b.changeTitle=function(){var a=document.title;window.onblur=function(){document.title=a},window.onfocus=function(){document.title=a}},b.dynamicToTop=function(){const b=300;var c=a('#dynamic-to-top');a(window).scroll(()=>{var d=a(window).scrollTop();typeof document.body.style.maxHeight=='undefined'&&c.css({position:'absolute',top:d+a(window).height()-20}),d>b?function(a,b){b=b||"block",a.style.display!==b&&(a.style.opacity=0,a.style.display=b,function c(){var b=parseFloat(a.style.opacity);(b+=.1)>1||(a.style.opacity=b,requestAnimationFrame(c))}())}(document.getElementById('dynamic-to-top')):function(a){a.style.display!=="none"&&(a.style.opacity=1,function b(){(a.style.opacity-=.1)<0?a.style.display="none":requestAnimationFrame(b)}())}(document.getElementById('dynamic-to-top'))})},b.chroma=function(){const a=document.querySelectorAll('.highlight > .chroma');for(let b=0;b<a.length;b++){const c=a[b],d=c.querySelectorAll('pre.chroma > code'),e=d[d.length-1],f=e?e.className.toLowerCase():'';c.className+=' '+f}},b.responsiveTable=function(){const a=document.querySelectorAll('.post-content table');for(let b=0;b<a.length;b++){const c=a[b],d=document.createElement('div');d.className='table-wrapper',c.parentElement.replaceChild(d,c),d.appendChild(c)}},b._refactorToc=function(c){const b=c.children[0];let a=b,d;while(a.children.length===1&&(d=a.children[0].children[0]).tagName==='UL')a=d;a!==b&&c.replaceChild(a,b)},b._linkToc=function(){const a=document.querySelectorAll('#TableOfContents a:first-child');for(let b=0;b<a.length;b++)a[b].className+=' toc-link';for(let a=1;a<=6;a++){const b=document.querySelectorAll('.post-content>h'+a);for(let a=0;a<b.length;a++){const c=b[a];c.innerHTML=`<a href="#${c.id}" class="headerlink"></a>${c.innerHTML}`}}},b._initToc=function(){const b=a('#post-toc');if(b.length&&b.css('display')!=='none'){const c=80,j=a('#post-footer'),e=b.position().top,f=a('main').position().top,m=e+f-c,h=function(){const g=a(window).scrollTop(),h=j.position().top-b.height(),i=h+f-c,d={start:{position:'absolute',top:e},process:{position:'fixed',top:c},end:{position:'absolute',top:h}};g<m?b.css(d.start):g>i?b.css(d.end):b.css(d.process)};h();const i=120,d=a('.toc-link'),k=a('.headerlink'),l=a('.post-toc-content li'),g=function(){const c=a(window).scrollTop(),e=a.map(k,function(b){return a(b).offset().top}),f=function(a,b){for(let c=0;c<a.length-1;c++)if(b<a[c+1])return c;return a.length-1},b=f(e,c+i);if(a(d).removeClass('active'),a(l).removeClass('has-active'),b!==-1){a(d[b]).addClass('active');let c=d[b].parentNode;while(c.tagName!=='NAV')a(c).addClass('has-active'),c=c.parentNode.parentNode}};g(),this._initTocOnce||(a(window).scroll(h),a(window).scroll(g),this._initTocOnce=!0)}},b.toc=function(){const a=document.getElementById('post-toc');if(a!==null){const c=document.getElementById('TableOfContents');c===null?a.parentNode.removeChild(a):(this._refactorToc(c),this._linkToc(),this._initToc(),window.addEventListener("resize",function(){this.setTimeout(b._initToc,0)},!1))}},b.mermaid=function(){if(window.mermaidMap){const a=mermaid.mermaidAPI;Object.keys(mermaidMap).forEach(b=>{const c=document.getElementById(b);a.render("d"+b,mermaidMap[b],a=>{c.innerHTML=a;const b=c.firstChild;b.style.width="100%"},c)})}},b.echarts=function(){if(window.echartsMap){for(let a=0;a<echartsArr.length;a++)echartsArr[a].dispose();echartsArr=[],Object.keys(echartsMap).forEach(a=>{let b=echarts.init(document.getElementById(a),window.isDark?'dark':'macarons',{renderer:'svg'});b.setOption(echartsMap[a]),echartsArr.push(b)}),window.addEventListener("resize",function(){this.setTimeout(()=>{for(let a=0;a<echartsArr.length;a++)echartsArr[a].resize()},0)},!1)}},b.countdown=function(){window.countdownMap&&Object.keys(countdownMap).forEach(function(b){a(`#${b}`).countdown(countdownMap[b].date,{elapse:!0}).on('update.countdown',function(c){a(this).html(c.strftime(countdownMap[b].pattern))})})},b.typeit=function(){if(window.typeitArr)for(let b=0;b<typeitArr.length;b++){const a=typeitArr[b];(function d(b){const c=document.getElementById(`r${a[b]}`).innerHTML;if(b===a.length-1){new TypeIt(`#${a[b]}`,{strings:c}).go();return}let e=new TypeIt(`#${a[b]}`,{strings:c,afterComplete:()=>{e.destroy(),d(b+1)}}).go()})(0)}},a(document).ready(()=>{b.toggleMobileMenu(),b.toggleTheme(),b.changeTitle(),b.dynamicToTop(),b.chroma(),b.responsiveTable(),b.mermaid(),b.echarts(),b.countdown(),b.typeit(),b.toc()})})